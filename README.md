# Job Vacancy Explorer (Агрегатор Вакансий)

[![Python Version](https://img.shields.io/badge/python-3.9%2B-blue.svg)](https://www.python.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Job Vacancy Explorer — это веб-приложение для агрегации, поиска и фильтрации вакансий. Приложение автоматически собирает данные о вакансиях с популярных платформ (в данной реализации — с HeadHunter), сохраняет их в локальной базе данных и предоставляет удобный веб-интерфейс для пользователей.

## Ключевые возможности

*   **Автоматический сбор вакансий**: Фоновый планировщик регулярно обновляет базу данных, парся вакансии с hh.ru.
*   **Продвинутый поиск и фильтрация**:
    *   Поиск по ключевым словам (в названии, компании, описании).
    *   Фильтрация по местоположению и названию компании.
    *   Фильтрация по диапазону заработной платы.
*   **Удобный интерфейс**: Современный и адаптивный интерфейс на базе Bootstrap 5 для просмотра вакансий.
*   **Просмотр деталей**: Каждая вакансия содержит подробное описание, информацию о зарплате, компании и дате публикации.
*   **Прямые ссылки**: Возможность перейти на оригинальную страницу вакансии для отклика.
*   **Сортировка результатов**: Вакансии можно отсортировать по дате публикации или по уровню зарплаты.
*   **Пагинация**: Удобная навигация по большому количеству найденных вакансий.

## Скриншоты

*()*

**Главная страница:**


**Страница поиска вакансий:**


## Технологический стек

*   **Бэкенд**: Python, Flask
*   **Парсинг**: Requests
*   **База данных**: SQLite
*   **Планировщик задач**: APScheduler
*   **Фронтенд**: HTML, Jinja2, Bootstrap 5, Font Awesome
*   **Тестирование**: Pytest

## Установка и запуск

### 1. Предварительные требования

*   Python 3.9 или новее.
*   `pip` и `venv` для управления зависимостями.

### 2. Клонирование репозитория

```bash
git clone https://github.com/Relayn/job-vacancy-explorer.git
cd job-vacancy-explorer
```

### 3. Создание и активация виртуального окружения

*   **Для macOS/Linux:**
    ```bash
    python3 -m venv .venv
    source .venv/bin/activate
    ```
*   **Для Windows:**
    ```bash
    python -m venv .venv
    .venv\Scripts\activate
    ```

### 4. Установка зависимостей

Создайте файл `requirements.txt` со следующим содержимым:

```txt
Flask
requests
apscheduler
python-dotenv
beautifulsoup4
lxml
tabulate
pytest
tzlocal
markupsafe
```

Затем установите зависимости:

```bash
pip install -r requirements.txt
```

### 5. Инициализация базы данных

При первом запуске база данных и необходимые таблицы будут созданы автоматически. Планировщик также начнет свою работу в фоновом режиме для сбора вакансий.

### 6. Запуск приложения

```bash
python run.py
```

После запуска приложение будет доступно по адресу [http://127.0.0.1:5000/](http://127.0.0.1:5000/).

## Как это работает

Архитектура проекта разделена на несколько ключевых компонентов:

1.  **Парсер (`parsers/hh_parser.py`)**:
    *   Отправляет запросы к API hh.ru для получения списка вакансий в формате JSON.
    *   Обрабатывает пагинацию для сбора всех доступных вакансий по заданному запросу.
    *   Извлекает и форматирует ключевую информацию: название, компанию, зарплату, описание и ссылку на оригинал.

2.  **База данных (`core/database.py`)**:
    *   Использует SQLite для хранения данных.
    *   Предоставляет функции для инициализации БД, добавления новых вакансий (с проверкой на дубликаты), а также для эффективного поиска и фильтрации.

3.  **Планировщик (`core/scheduler.py`)**:
    *   Использует `APScheduler` для запуска парсера в фоновом режиме через заданные интервалы времени (настраивается в `.env` файле).
    *   Это гарантирует, что база вакансий всегда остается актуальной.

4.  **Веб-приложение (`app/`)**:
    *   Построено на фреймворке Flask.
    *   Обрабатывает HTTP-запросы от пользователя.
    *   Взаимодействует с модулем базы данных для получения отфильтрованных и отсортированных вакансий.
    *   Отрисовывает HTML-шаблоны (`templates/`) с помощью Jinja2, передавая в них полученные данные.

## Структура проекта

```
.
├── app/                # Модуль веб-приложения Flask
│   ├── static/         # Статические файлы (CSS, JS, изображения)
│   ├── templates/      # HTML-шаблоны (Jinja2)
│   ├── __init__.py     # Фабрика приложения Flask
│   └── routes.py       # Маршруты и логика представлений
├── core/               # Основная бизнес-логика
│   ├── __init__.py
│   ├── config.py       # Конфигурация приложения
│   ├── database.py     # Функции для работы с БД
│   └── scheduler.py    # Логика фонового планировщика
├── parsers/            # Скрипты для парсинга
│   ├── hh_parser.py    # Парсер для API hh.ru
│   └── vacancies.db    # Файл базы данных SQLite
├── tests/              # Модульные и интеграционные тесты
├── .gitignore
├── LICENSE             # Лицензия MIT
├── README.md           # Этот файл
└── run.py              # Точка входа для запуска приложения
```

## Запуск тестов

Для проверки корректности работы всех модулей можно запустить тесты с помощью `pytest`.

```bash
pytest
```

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле [LICENSE](LICENSE).